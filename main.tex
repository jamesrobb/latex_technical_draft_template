% --- packages, their configurations, and general document configurations.
% ---
\documentclass[a4paper,8pt]{extarticle}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage[most]{tcolorbox}
\usepackage{xspace}
\usepackage{lipsum}

\usepackage[ampersand]{easylist}
\ListProperties(Hide=100, Hang=true, Progressive=1ex, Style*=-- , Style2*=$\circ$ ,Style3*=\tiny$\blacksquare$ )

\usepackage{amsmath,amssymb,textcomp}
\everymath{\displaystyle}

\usepackage{times}
\renewcommand\familydefault{\sfdefault}

\usepackage{tgheros}
\usepackage[defaultmono,scale=0.85]{droidsansmono}

\usepackage{multicol}
\setlength{\columnseprule}{0pt}
\setlength{\columnsep}{10.0pt}

\usepackage{geometry}
\geometry{
	a4paper,
	left=10mm,
	right=10mm,
	top=10mm,
	bottom=15mm
}
\linespread{1.3}

\usepackage[backend=biber,bibencoding=utf8,sortcites]{biblatex}
\addbibresource{references.bib}
%% This tells TeXStudio to use biber
% !TeX TXS-program:bibliography = txs:///biber

% --- custom document titles
% ---
\makeatletter
\renewcommand*{\maketitle}{%
\noindent
\begin{minipage}{1.0\columnwidth}
	\begin{tikzpicture}
		\node[rectangle,inner sep=10pt,fill=black,text width=1.0\columnwidth-20pt] {\color{white}\Huge \@title};
	\end{tikzpicture}
\end{minipage}
%\hfill
%\begin{minipage}{0.55\textwidth}
%	\begin{tikzpicture}
%		\node[rectangle,rounded corners=3pt,inner sep=10pt,draw=blue!50!black,text width= 0.95\textwidth] {\LARGE \@author
%			};
%	\end{tikzpicture}
%\end{minipage}	
\bigskip
}%
\makeatother

% --- custom sections
% ---
\usepackage[explicit]{titlesec}
\newcommand*\sectionlabel{}
\titleformat{\section}
  {\gdef\sectionlabel{}
   \normalfont\sffamily\Large\bfseries}
  {\gdef\sectionlabel{\thesection\ }}{-2pt}
  {
	\noindent
	\begin{tikzpicture}
	\node[rectangle, inner sep=5pt,fill=black!50!black,text width=1.0\columnwidth-10pt] {\color{white}\sectionlabel#1};
	\end{tikzpicture}
  }
\titlespacing*{\section}{0pt}{0pt}{-10pt}

\definecolor{topicboxframe}{HTML}{2e5077}
\newcommand{\topicbox}[2]{%
	\begin{tcolorbox}[enhanced jigsaw,breakable,size=title,colback=white,colframe=topicboxframe,sharp corners,before skip=10pt,after skip=10pt,boxrule=0.2mm,left=1mm,title=#1]%
	#2%
	\end{tcolorbox}%
}

% --- custom footer
% ---
\usepackage{fancyhdr}
\makeatletter
\pagestyle{fancy}
\fancyhead{}
\fancyfoot[C]{\footnotesize \textcopyright\ \@date\ \ \@author}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\makeatother

% --- custom align/math environment
% ---
\usepackage{etoolbox}
\preto\align{\par\nobreak\large\noindent}
\expandafter\preto\csname align*\endcsname{\par\nobreak\large\noindent}

% --- code lising environment
% ---
\usepackage{listings}
\lstset
{
	numbers=left,
	stepnumber=1,
	xleftmargin=2.5em,
	xrightmargin=0.5em,
	frame=single,
	framexleftmargin=2em
}


% --- document information
% ---
\title{Technical Draft Template}
\author{James Robb}
\date{\today}

% --- latin macros
% ---
\newcommand{\ie}{{\it i.e.}\xspace}

% --- code macros
\newcommand{\inlinecode}[1]{\texttt{#1}}

% --- math macros
% ---
\newcommand{\vect}[1]{\vec{#1}}
\newcommand{\uvect}[1]{\boldsymbol{#1}}

% For derivatives
\newcommand{\deriv}[2]{\frac{\mathrm{d}}{\mathrm{d}#1} #2}

% For partial derivatives
\newcommand{\pderiv}[2]{\frac{\partial}{\partial #1} #2}
\newcommand{\pderivf}[3]{\frac{\partial#1}{\partial #2} #3}

\newcommand{\overbar}[1]{\mkern 1.5mu\overline{\mkern-1.5mu#1\mkern-1.5mu}\mkern 1.5mu}

\newcommand*{\Perm}[2]{{}^{#1}\!P_{#2}}%
\newcommand*{\Comb}[2]{{}^{#1}C_{#2}}%

% Matrix macro
\makeatletter
\renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
  \hskip -\arraycolsep
  \let\@ifnextchar\new@ifnextchar
  \array{#1}}
\makeatother


% --- start the actual content
\begin{document}	
\maketitle

\section{Introduction}

\lipsum[5]

\topicbox{Topic Box!}{
This is to draw someone's eye to a special topic!
}

\section{Mathematics}

We love to use mathematics, don't we?

\begin{align*}
	x &= 3 + 2 \\
	x - 3 - 2 &= 0
\end{align*}

\begin{align*}
	M &= \begin{bmatrix}[ccccc|c]
	1 & 0 & -2 & 3 & 0 & -24\\
	0 & 1 & -2 & 2 & 0 & -7\\
	0 & 0 & 0 & 0 & 1 & 4
	\end{bmatrix}
\end{align*}

\section{Figures Galore}

It's known that monkeys of the donkey variety love bananas \cite{kong_1994}.

\begin{figure}[hbt!]
	\centering
	\includegraphics[scale=0.5]{./figures/example_figure}
	\caption{Ooo... banana!}
\end{figure}

\section{Code}

In the following program I show the reader the necessary code to implement the program.

\lstinputlisting[language=C++]{./code/example_code.cpp}

% --- references
\clearpage
\printbibliography{}

\end{document}
